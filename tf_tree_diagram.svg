<svg width="900" height="650" viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg" font-family="Roboto, sans-serif">
  <defs>
    <style>
      .node { fill: #fefefe; stroke: #34495e; stroke-width: 2; rx: 10; ry: 10; }
      .node-text { font-size: 14px; fill: #2c3e50; font-weight: 600; text-anchor: middle; alignment-baseline: middle; }
      .static-edge { stroke: #2c3e50; stroke-width: 2; marker-end: url(#arrow); }
      .dynamic-edge { stroke: #e67e22; stroke-width: 2; stroke-dasharray: 6 3; marker-end: url(#arrow); }
      .legend-text { font-size: 12px; fill: #2c3e50; }
    </style>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2c3e50"/>
    </marker>
  </defs>

  <!-- Fondo blanco -->
  <rect x="0" y="0" width="900" height="650" fill="white"/>

  <text x="450" y="40" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Árbol de TF2 - Burger Delivery Gen3
  </text>
  <text x="450" y="65" font-size="14" text-anchor="middle" fill="#7f8c8d">
    Basado en ROS/visual/burger_delivery_gen3.urdf
  </text>

  <!-- Conexiones estáticas -->
  <g stroke-linecap="round" fill="none">
    <line x1="450" y1="110" x2="300" y2="170" class="static-edge"/>
    <line x1="300" y1="210" x2="300" y2="270" class="static-edge"/>
    <line x1="300" y1="210" x2="450" y2="280" class="static-edge"/>
    <line x1="450" y1="320" x2="450" y2="380" class="static-edge"/>
    <line x1="450" y1="420" x2="450" y2="480" class="static-edge"/>

    <line x1="450" y1="110" x2="600" y2="170" class="static-edge"/>
    <line x1="600" y1="210" x2="600" y2="270" class="static-edge"/>

    <line x1="450" y1="110" x2="150" y2="200" class="static-edge"/>
    <line x1="150" y1="240" x2="150" y2="320" class="static-edge"/>

    <line x1="450" y1="110" x2="750" y2="200" class="static-edge"/>
    <line x1="750" y1="240" x2="750" y2="320" class="static-edge"/>

    <line x1="300" y1="210" x2="300" y2="350" class="static-edge"/>
  </g>

  <!-- Conexiones dinámicas (cadena Kinova oficial) -->
  <g stroke-linecap="round" fill="none">
    <line x1="300" y1="310" x2="300" y2="370" class="dynamic-edge"/>
    <line x1="300" y1="410" x2="300" y2="470" class="dynamic-edge"/>
    <line x1="300" y1="510" x2="300" y2="570" class="dynamic-edge"/>
  </g>

  <!-- Nodos -->
  <g text-anchor="middle">
    <rect class="node" x="410" y="90" width="80" height="40"/>
    <text class="node-text" x="450" y="110">map</text>

    <rect class="node" x="260" y="170" width="80" height="40"/>
    <text class="node-text" x="300" y="190">table_link</text>

    <rect class="node" x="260" y="240" width="80" height="40"/>
    <text class="node-text" x="300" y="260">world</text>

    <rect class="node" x="260" y="310" width="80" height="40"/>
    <text class="node-text" x="300" y="330">gen3_base_link</text>

    <rect class="node" x="260" y="380" width="80" height="40"/>
    <text class="node-text" x="300" y="400">… gen3_joints …</text>

    <rect class="node" x="260" y="450" width="80" height="40"/>
    <text class="node-text" x="300" y="470">gen3_end_effector_link</text>

    <rect class="node" x="260" y="520" width="80" height="40"/>
    <text class="node-text" x="300" y="540">tool frames</text>

    <rect class="node" x="410" y="250" width="80" height="40"/>
    <text class="node-text" x="450" y="270">kinova_base_link</text>

    <rect class="node" x="410" y="340" width="80" height="40"/>
    <text class="node-text" x="450" y="360">kinova_tool_frame</text>

    <rect class="node" x="410" y="410" width="80" height="40"/>
    <text class="node-text" x="450" y="430">burger_grip_frame</text>

    <rect class="node" x="560" y="170" width="80" height="40"/>
    <text class="node-text" x="600" y="190">staging_area</text>

    <rect class="node" x="560" y="240" width="80" height="40"/>
    <text class="node-text" x="600" y="260">delivery_slot_1</text>

    <rect class="node" x="700" y="200" width="100" height="40"/>
    <text class="node-text" x="750" y="220">robot_b_base_link</text>

    <rect class="node" x="700" y="300" width="100" height="40"/>
    <text class="node-text" x="750" y="320">robot_b_tray_frame</text>

    <rect class="node" x="100" y="200" width="100" height="40"/>
    <text class="node-text" x="150" y="220">robot_a_base_link</text>

    <rect class="node" x="100" y="300" width="100" height="40"/>
    <text class="node-text" x="150" y="320">robot_a_tray_frame</text>

    <rect class="node" x="560" y="310" width="80" height="40"/>
    <text class="node-text" x="600" y="330">overhead_camera_link</text>
  </g>

  <!-- Leyenda -->
  <g transform="translate(40, 500)">
    <rect x="0" y="0" width="250" height="120" fill="#f8f9fb" stroke="#d0d3d4" rx="8"/>
    <text x="125" y="25" font-size="16" font-weight="bold" fill="#2c3e50" text-anchor="middle">Leyenda</text>

    <line x1="20" y1="50" x2="70" y2="50" class="static-edge"/>
    <text class="legend-text" x="80" y="54">Transformación estática (fixed joint)</text>

    <line x1="20" y1="80" x2="70" y2="80" class="dynamic-edge"/>
    <text class="legend-text" x="80" y="84">Transformación dinámica (joints Gen3)</text>

    <text class="legend-text" x="125" y="110">
      El branch a la derecha usa frames rígidos auxiliares (`kinova_tool_frame`, `burger_grip_frame`) para definir el TCP.
    </text>
  </g>
</svg>
